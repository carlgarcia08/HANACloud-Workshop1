'use strict';
const fs = require( 'fs' );
const path = require( 'path' );
const isValid = ( text, errorMessge, yeomanEnvObject ) => {
    if( !text ){
        return'You must provide a project name in order to continue.';
    } else {
        if( fs.existsSync( path.join( yeomanEnvObject.destinationRoot(), text ) ) ){
            return'A directory with the same name already exists. Please choose a different project name.';
        } else if(
            RegExp( /[a-zA-Z]/ ).test( text.charAt( 0 ) ) &&
            RegExp( /^[a-zA-Z0-9._-]+$/ ).test( text ) &&
            !RegExp( /\.\./ ).test( text ) &&
            !RegExp( /\.-/ ).test( text ) &&
            !RegExp( /\.[0-9]/ ).test( text ) &&
            RegExp( /[a-zA-Z0-9-_]/ ).test( text.charAt( text.length - 1 ) )
        ) {
            return true;
        } else {
            return errorMessge;
        }
    }
};

module.exports = { isValid };
